// Prisma Schema for L&T IPMS Conversational App
// This schema defines models for storing conversation history

generator client {
  provider             = "prisma-client-py"
  interface            = "asyncio"
  recursive_type_depth = 5
  output               = "../.venv/Lib/site-packages/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Conversation model - represents a chat thread
model Conversation {
  id        String    @id @default(uuid())
  threadId  String    @unique @map("thread_id")
  title     String?
  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime  @updatedAt @map("updated_at")
  messages  Message[]

  @@map("conversations")
}

// Message model - individual messages in a conversation
model Message {
  id             String       @id @default(uuid())
  conversationId String       @map("conversation_id")
  role           String       // 'user', 'assistant', 'system', 'tool'
  content        String
  // Token tracking
  inputTokens    Int?         @map("input_tokens")
  outputTokens   Int?         @map("output_tokens")
  totalTokens    Int?         @map("total_tokens")
  // Tool call tracking
  toolCalls      Json?        @map("tool_calls")    // Array of {name, args, result}
  toolName       String?      @map("tool_name")     // For tool result messages
  // Model info
  model          String?      // Model used for this response
  // Feedback tracking
  feedback       String?      // 'positive', 'negative', or null
  feedbackNote   String?      @map("feedback_note")  // Optional user comment
  editedFrom     String?      @map("edited_from")    // ID of original message if this is an edit
  // Branching/versioning fields for ChatGPT-style navigation
  positionIndex  Int?         @map("position_index")   // Logical position in conversation (0, 1, 2...)
  branchIndex    Int          @default(0) @map("branch_index")  // Version at this position (0 = original, 1 = first edit)
  activeBranch   Boolean      @default(true) @map("active_branch")  // Is this the currently visible version?
  // Flexible metadata JSON for additional info
  metadata       Json?        // {latency_ms, finish_reason, etc.}
  createdAt      DateTime     @default(now()) @map("created_at")
  conversation   Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade)

  @@index([conversationId])
  @@index([role])
  @@index([conversationId, positionIndex, activeBranch])
  @@map("messages")
}



// User model - stores user credentials and profile
model User {
  id            String    @id @default(uuid())
  name          String
  email         String    @unique
  passwordHash  String    @map("password_hash")
  systemRole    String    @default("USER") @map("system_role")
  isActive      Boolean   @default(true) @map("is_active")
  createdAt     DateTime  @default(now()) @map("created_at")
  updatedAt     DateTime  @updatedAt @map("updated_at")
  
  sessions      Session[]
  
  @@map("users")
}

// Session model - stores active user sessions
model Session {
  id        String   @id @default(uuid())
  userId    String   @map("user_id")
  token     String   @unique
  expiresAt DateTime @map("expires_at")
  createdAt DateTime @default(now()) @map("created_at")
  
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@index([userId])
  @@index([token])
  @@map("sessions")
}



model Tbl01ProjectSummary {
  id Int @id @default(autoincrement())
  projectKey                          Int             @map("Project_Key")
  projectId                           String?         @map("Project_ID")
  projectName                         String?         @map("Project_Name")
  projectLocation                     String?         @map("Project_Location")
  projectManager                      String?         @map("Project_Manager")
  projectManagerDesignation           String?         @map("Project_Manager_Designation")
  dashboardAsondate                   DateTime?       @map("Dashboard_AsOnDate")
  baselineStartDate                   DateTime?       @map("Baseline_Start_Date")
  baselineFinishDate                  DateTime?       @map("Baseline_Finish_Date")
  forecastStartDate                   DateTime?       @map("Forecast_Start_Date")
  forecastFinishDate                  DateTime?       @map("Forecast_Finish_Date")
  actualStartDate                     DateTime?       @map("Actual_Start_Date")
  contractualCompletionDate           DateTime?       @map("Contractual_Completion_Date")
  baselineDurationDays                Int?            @map("Baseline_Duration_Days")
  forecastDurationDays                Int?            @map("Forecast_Duration_Days")
  adjustedTotalDurationDays           Int?            @map("Adjusted_Total_Duration_Days")
  slipDays                            Int?            @map("Slip_Days")
  scheduleVarianceDays                Int?            @map("Schedule_Variance_Days")
  projectExecutionIndex               String?         @map("Project_Execution_Index")
  daysToContractualEnd                Int?            @map("Days_To_Contractual_End")
  daysToForecastEnd                   Int?            @map("Days_To_Forecast_End")
  eotBufferDays                       Int?            @map("EOT_Buffer_Days")
  projectAgeDays                      Int?            @map("Project_Age_Days")
  projectElapsedPct                   Float?          @map("Project_Elapsed_Pct")
  eotRagStatus                        String?         @map("EOT_RAG_Status")
  scheduleRecoveryDays                Int?            @map("Schedule_Recovery_Days")
  jcrApprovedDate                     DateTime?       @map("JCR_Approved_Date")
  pmsApprovedDate                     DateTime?       @map("PMS_Approved_Date")
  rescheduledDate                     DateTime?       @map("Rescheduled_Date")
  baselineVsRescheduledSlip           String?         @map("Baseline_vs_Rescheduled_Slip")
  currentVsRescheduledSlip            String?         @map("Current_vs_Rescheduled_Slip")
  baselineIntegrityLabel              String?         @map("Baseline_Integrity_Label")
  eotExposureDays                     Int?            @map("EOT_Exposure_Days")
  maxForecastDelayDaysEngineering     Int?            @map("Max_Forecast_Delay_Days_Engineering")
  maxForecastDelayDaysProcurement     Int?            @map("Max_Forecast_Delay_Days_Procurement")
  maxForecastDelayDaysConstruction    Int?            @map("Max_Forecast_Delay_Days_Construction")
  maxForecastDelayDaysOverall         Int?            @map("Max_Forecast_Delay_Days_Overall")
  spiOverall                          Float?          @map("SPI_Overall")
  spiEngineering                      Float?          @map("SPI_Engineering")
  spiProcurement                      Float?          @map("SPI_Procurement")
  spiConstruction                     Float?          @map("SPI_Construction")
  cumulativePlannedPctOverall         Float?          @map("Cumulative_Planned_Pct_Overall")
  cumulativeActualPctOverall          Float?          @map("Cumulative_Actual_Pct_Overall")
  cumulativeBacklogPctOverall         Float?          @map("Cumulative_Backlog_Pct_Overall")
  cumulativePlannedPctEngineering     Float?          @map("Cumulative_Planned_Pct_Engineering")
  cumulativeActualPctEngineering      Float?          @map("Cumulative_Actual_Pct_Engineering")
  cumulativeBacklogPctEngineering     Float?          @map("Cumulative_Backlog_Pct_Engineering")
  cumulativePlannedPctProcurement     Float?          @map("Cumulative_Planned_Pct_Procurement")
  cumulativeActualPctProcurement      Float?          @map("Cumulative_Actual_Pct_Procurement")
  cumulativeBacklogPctProcurement     Float?          @map("Cumulative_Backlog_Pct_Procurement")
  cumulativePlannedPctConstruction    Float?          @map("Cumulative_Planned_Pct_Construction")
  cumulativeActualPctConstruction     Float?          @map("Cumulative_Actual_Pct_Construction")
  cumulativeBacklogPctConstruction    Float?          @map("Cumulative_Backlog_Pct_Construction")
  spiRagStatus                        Float?          @map("SPI_RAG_Status")
  progressGapPct                      Float?          @map("Progress_Gap_Pct")
  weakestDomain                       String?         @map("Weakest_Domain")
  floatTotalTaskCount                 Int?            @map("Float_Total_Task_Count")
  floatNegativeTaskCount              Int?            @map("Float_Negative_Task_Count")
  floatZeroTaskCount                  Int?            @map("Float_Zero_Task_Count")
  floatNearCriticalTaskCount          Int?            @map("Float_Near_Critical_Task_Count")
  floatPositiveTaskCount              Int?            @map("Float_Positive_Task_Count")
  floatAvgDays                        Int?            @map("Float_Avg_Days")
  floatMinDays                        Int?            @map("Float_Min_Days")
  floatAtRiskPct                      Float?          @map("Float_At_Risk_Pct")
  negFloatPct                         Float?          @map("Neg_Float_Pct")
  zeroFloatPct                        Float?          @map("Zero_Float_Pct")
  nearCritFloatPct                    Float?          @map("Near_Crit_Float_Pct")
  healthyFloatPct                     Float?          @map("Healthy_Float_Pct")
  floatHealthPct                      Float?          @map("Float_Health_Pct")
  floatRagStatus                      Float?          @map("Float_RAG_Status")
  cpTaskCount                         Int?            @map("CP_Task_Count")
  cpPctOfTotal                        Float?          @map("CP_Pct_Of_Total")
  cpTighteningScore                   Float?          @map("CP_Tightening_Score")
  cadOverall                          String?         @map("CAD_Overall")
  cadEngineering                      String?         @map("CAD_Engineering")
  cadProcurement                      String?         @map("CAD_Procurement")
  cadConstruction                     String?         @map("CAD_Construction")
  workfrontReadinessOverallPct        Float?          @map("Workfront_Readiness_Overall_Pct")
  workfrontReadinessEngineeringPct    Float?          @map("Workfront_Readiness_Engineering_Pct")
  workfrontReadinessProcurementPct    Float?          @map("Workfront_Readiness_Procurement_Pct")
  workfrontReadinessConstructionPct   Float?          @map("Workfront_Readiness_Construction_Pct")
  executableProgressOverallPct        Float?          @map("Executable_Progress_Overall_Pct")
  executableProgressEngineeringPct    Float?          @map("Executable_Progress_Engineering_Pct")
  executableProgressProcurementPct    Float?          @map("Executable_Progress_Procurement_Pct")
  executableProgressConstructionPct   Float?          @map("Executable_Progress_Construction_Pct")
  contributionToProjectOverallPct     Float?          @map("Contribution_To_Project_Overall_Pct")
  contributionToProjectEngineeringPct Float?          @map("Contribution_To_Project_Engineering_Pct")
  contributionToProjectProcurementPct Float?          @map("Contribution_To_Project_Procurement_Pct")
  contributionToProjectConstructionPct Float?          @map("Contribution_To_Project_Construction_Pct")
  activitiesTotalCount                Int?            @map("Activities_Total_Count")
  activitiesCompleteCount             Int?            @map("Activities_Complete_Count")
  activitiesInProgressCount           Int?            @map("Activities_In_Progress_Count")
  activitiesOverdueCount              Int?            @map("Activities_Overdue_Count")
  activitiesNotYetDueCount            Int?            @map("Activities_Not_Yet_Due_Count")
  activitiesCompletionRatePct         Float?          @map("Activities_Completion_Rate_Pct")
  activitiesOverdueRatePct            Float?          @map("Activities_Overdue_Rate_Pct")
  conLacWeekPct                       Float?          @map("CON_LAC_Week_Pct")
  conLacMonthPct                      Float?          @map("CON_LAC_Month_Pct")
  conLacCompletedRules                Int?            @map("CON_LAC_Completed_Rules")
  conLacOverdueCount                  Int?            @map("CON_LAC_Overdue_Count")
  conLacAtRisk7dayCount               Int?            @map("CON_LAC_At_Risk_7Day_Count")
  conLacAtRisk30dayCount              Int?            @map("CON_LAC_At_Risk_30Day_Count")
  conLacPendingCount                  Int?            @map("CON_LAC_Pending_Count")
  conLacRag                           String?         @map("CON_LAC_RAG")
  prcLacWeekPct                       Float?          @map("PRC_LAC_Week_Pct")
  prcLacMonthPct                      Float?          @map("PRC_LAC_Month_Pct")
  prcLacCompletedRules                Int?            @map("PRC_LAC_Completed_Rules")
  prcLacOverdueCount                  Int?            @map("PRC_LAC_Overdue_Count")
  prcLacAtRisk7dayCount               Int?            @map("PRC_LAC_At_Risk_7Day_Count")
  prcLacAtRisk30dayCount              Int?            @map("PRC_LAC_At_Risk_30Day_Count")
  prcLacPendingCount                  Int?            @map("PRC_LAC_Pending_Count")
  prcLacRag                           String?         @map("PRC_LAC_RAG")
  activitiesStarting2w                String?         @map("Activities_Starting_2W")
  activitiesFinishing2w               String?         @map("Activities_Finishing_2W")
  activitiesStarting4w                String?         @map("Activities_Starting_4W")
  delayRiskLabel                      String?         @map("Delay_Risk_Label")
  delayHotspotDomain                  String?         @map("Delay_Hotspot_Domain")
  delayConcentrationDomain            String?         @map("Delay_Concentration_Domain")
  scenarioBaseSpi                     Float?          @map("Scenario_Base_SPI")
  forecastFinishIfSpi1                String?         @map("Forecast_Finish_If_SPI1")
  forecastFinishAtCurrentSpi          Float?          @map("Forecast_Finish_At_Current_SPI")
  recoveryDaysNeeded                  Int?            @map("Recovery_Days_Needed")
  recoverySpiRequired                 Float?          @map("Recovery_SPI_Required")
  recoveryPlanStatus                  String?         @map("Recovery_Plan_Status")
  compressionHeadroomPct              Float?          @map("Compression_Headroom_Pct")
  dataAgeDays                         Int?            @map("Data_Age_Days")
  dataFreshnessLabel                  String?         @map("Data_Freshness_Label")
  eotEligibilityLabel                 String?         @map("EOT_Eligibility_Label")
  scheduleHealthScore                 Float?          @map("Schedule_Health_Score")
  scheduleHealthRag                   String?         @map("Schedule_Health_RAG")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([projectKey])
  @@map("tbl_01_project_summary")
}

model Tbl02ProjectActivity {
  id Int @id @default(autoincrement())
  projectKey                          Int             @map("Project_Key")
  activityCode                        String?         @map("Activity_Code")
  activityDescription                 String?         @map("Activity_Description")
  workpackage                         String?         @map("Workpackage")
  location                            String?         @map("Location")
  domain                              String?         @map("Domain")
  domainCode                          String?         @map("Domain_Code")
  scurve                              String?         @map("SCurve")
  totalTaskCount                      Int?            @map("Total_Task_Count")
  workfrontReadyCount                 Int?            @map("Workfront_Ready_Count")
  baselineStartDate                   DateTime?       @map("Baseline_Start_Date")
  baselineFinishDate                  DateTime?       @map("Baseline_Finish_Date")
  forecastStartDate                   DateTime?       @map("Forecast_Start_Date")
  forecastFinishDate                  DateTime?       @map("Forecast_Finish_Date")
  actualStartDate                     DateTime?       @map("Actual_Start_Date")
  actualFinishDate                    DateTime?       @map("Actual_Finish_Date")
  baselineDurationDays                Int?            @map("Baseline_Duration_Days")
  forecastDurationDays                Int?            @map("Forecast_Duration_Days")
  adjustedTotalDurationDays           Int?            @map("Adjusted_Total_Duration_Days")
  slipDays                            Int?            @map("Slip_Days")
  scheduleVarianceDays                Int?            @map("Schedule_Variance_Days")
  activityStatus                      String?         @map("Activity_Status")
  daysToForecastFinish                Int?            @map("Days_To_Forecast_Finish")
  startDelayDays                      Int?            @map("Start_Delay_Days")
  durationOverrunDays                 Int?            @map("Duration_Overrun_Days")
  timeProgressGapPct                  Float?          @map("Time_Progress_Gap_Pct")
  totalFloatDays                      Int?            @map("Total_Float_Days")
  isCriticalWrench                    Boolean?        @map("Is_Critical_Wrench")
  projectMinFloatDays                 Int?            @map("Project_Min_Float_Days")
  isControllingFloatActivity          Float?          @map("Is_Controlling_Float_Activity")
  floatHealthStatus                   Float?          @map("Float_Health_Status")
  floatHealthSortOrder                Int?            @map("Float_Health_Sort_Order")
  floatRagLabel                       Float?          @map("Float_RAG_Label")
  floatPctOfProjectMin                Float?          @map("Float_Pct_Of_Project_Min")
  criticalActivityDensityPct          Float?          @map("Critical_Activity_Density_Pct")
  workfrontReadyPct                   Float?          @map("Workfront_Ready_Pct")
  workfrontGapCount                   Int?            @map("Workfront_Gap_Count")
  cadBreachFlag                       Boolean?        @map("CAD_Breach_Flag")
  plannedProgressPct                  Float?          @map("Planned_Progress_Pct")
  actualProgressPct                   Float?          @map("Actual_Progress_Pct")
  forecastProgressPct                 Float?          @map("Forecast_Progress_Pct")
  progressVariancePct                 Float?          @map("Progress_Variance_Pct")
  plannedQuantity                     Float?          @map("Planned_Quantity")
  earnedQuantity                      Float?          @map("Earned_Quantity")
  executableProgressPct               Float?          @map("Executable_Progress_Pct")
  contributionToProjectPct            Float?          @map("Contribution_To_Project_Pct")
  activitySpi                         Float?          @map("Activity_SPI")
  spiRagLabel                         Float?          @map("SPI_RAG_Label")
  requiredProgressRatePerDay          String?         @map("Required_Progress_Rate_Per_Day")
  remainingQuantity                   Float?          @map("Remaining_Quantity")
  forecastDelayDays                   Int?            @map("Forecast_Delay_Days")
  cpmDelayBreachFlag                  Boolean?        @map("CPM_Delay_Breach_Flag")
  delayMagnitudeLabel                 String?         @map("Delay_Magnitude_Label")
  cumulativePlannedProgress           String?         @map("Cumulative_Planned_Progress")
  cumulativeActualProgress            String?         @map("Cumulative_Actual_Progress")
  cumulativeBacklogPct                Float?          @map("Cumulative_Backlog_Pct")
  domainSpi                           Float?          @map("Domain_SPI")
  conTotalRules                       Int?            @map("CON_Total_Rules")
  conCompletedRules                   Int?            @map("CON_Completed_Rules")
  conOverdueRules                     Int?            @map("CON_Overdue_Rules")
  conAtRiskRules7day                  Int?            @map("CON_At_Risk_Rules_7Day")
  conAtRiskRules30day                 Int?            @map("CON_At_Risk_Rules_30Day")
  conPendingRules                     Int?            @map("CON_Pending_Rules")
  conLacWeekPct                       Float?          @map("CON_LAC_Week_Pct")
  conLacMonthPct                      Float?          @map("CON_LAC_Month_Pct")
  conLacRag                           String?         @map("CON_LAC_RAG")
  prcTotalRules                       Int?            @map("PRC_Total_Rules")
  prcCompletedRules                   Int?            @map("PRC_Completed_Rules")
  prcOverdueRules                     Int?            @map("PRC_Overdue_Rules")
  prcAtRiskRules7day                  Int?            @map("PRC_At_Risk_Rules_7Day")
  prcAtRiskRules30day                 Int?            @map("PRC_At_Risk_Rules_30Day")
  prcPendingRules                     Int?            @map("PRC_Pending_Rules")
  prcLacWeekPct                       Float?          @map("PRC_LAC_Week_Pct")
  prcLacMonthPct                      Float?          @map("PRC_LAC_Month_Pct")
  prcLacRag                           String?         @map("PRC_LAC_RAG")
  cpLabel                             String?         @map("CP_Label")
  floatVsProjectMin                   Float?          @map("Float_Vs_Project_Min")
  floatErosionFlag                    Float?          @map("Float_Erosion_Flag")
  in2wStartWindow                     String?         @map("In_2W_Start_Window")
  in2wFinishWindow                    String?         @map("In_2W_Finish_Window")
  in4wStartWindow                     String?         @map("In_4W_Start_Window")
  lookaheadPriorityScore              Float?          @map("LookAhead_Priority_Score")
  baselineDriftLabel                  String?         @map("Baseline_Drift_Label")
  scheduleVarianceLabel               Float?          @map("Schedule_Variance_Label")
  delaySourceLabel                    String?         @map("Delay_Source_Label")
  constraintDelayDays                 Int?            @map("Constraint_Delay_Days")
  isConstraintBottleneck              Boolean?        @map("Is_Constraint_Bottleneck")
  delaySeverityLabel                  String?         @map("Delay_Severity_Label")
  compoundRiskScore                   Float?          @map("Compound_Risk_Score")
  riskWatchFlag                       Boolean?        @map("Risk_Watch_Flag")
  whatifDelayImpactDays               Int?            @map("WhatIf_Delay_Impact_Days")
  accelerationNeededDays              Int?            @map("Acceleration_Needed_Days")
  spiRequiredForRecovery              Float?          @map("SPI_Required_For_Recovery")
  recoveryFeasibilityLabel            String?         @map("Recovery_Feasibility_Label")
  crashCandidateFlag                  Boolean?        @map("Crash_Candidate_Flag")
  fasttrackCandidateFlag              Boolean?        @map("FastTrack_Candidate_Flag")
  activityHealthScore                 Float?          @map("Activity_Health_Score")
  activityHealthRag                   String?         @map("Activity_Health_RAG")
  reportFlag                          Boolean?        @map("Report_Flag")
  narrativePriority                   String?         @map("Narrative_Priority")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([projectKey])
  @@map("tbl_02_project_activity")
}

model Tbl03ProjectTask {
  id Int @id @default(autoincrement())
  projectKey                          Int             @map("Project_Key")
  taskKey                             Int             @map("Task_Key")
  taskName                            String?         @map("Task_Name")
  activityCode                        String?         @map("Activity_Code")
  activityDescription                 String?         @map("Activity_Description")
  workpackage                         String?         @map("Workpackage")
  location                            String?         @map("Location")
  domain                              String?         @map("Domain")
  domainCode                          String?         @map("Domain_Code")
  scurve                              String?         @map("SCurve")
  isSummary                           Boolean?        @map("Is_Summary")
  isMilestone                         Boolean?        @map("Is_Milestone")
  isCritical                          Boolean?        @map("Is_Critical")
  isWorkfrontAvailable                Boolean?        @map("Is_WorkFront_Available")
  baselineStartDate                   DateTime?       @map("Baseline_Start_Date")
  baselineFinishDate                  DateTime?       @map("Baseline_Finish_Date")
  forecastStartDate                   DateTime?       @map("Forecast_Start_Date")
  forecastFinishDate                  DateTime?       @map("Forecast_Finish_Date")
  actualStartDate                     DateTime?       @map("Actual_Start_Date")
  actualFinishDate                    DateTime?       @map("Actual_Finish_Date")
  baselineDurationDays                Int?            @map("Baseline_Duration_Days")
  forecastDurationDays                Int?            @map("Forecast_Duration_Days")
  adjustedTotalDurationDays           Int?            @map("Adjusted_Total_Duration_Days")
  slipDays                            Int?            @map("Slip_Days")
  scheduleVarianceDays                Int?            @map("Schedule_Variance_Days")
  taskStatus                          String?         @map("Task_Status")
  daysToForecastFinish                Int?            @map("Days_To_Forecast_Finish")
  startDelayDays                      Int?            @map("Start_Delay_Days")
  durationOverrunDays                 Int?            @map("Duration_Overrun_Days")
  actualDurationDays                  Int?            @map("Actual_Duration_Days")
  totalFloatDays                      Int?            @map("Total_Float_Days")
  isCriticalWrench                    Boolean?        @map("Is_Critical_Wrench")
  projectMinFloatDays                 Int?            @map("Project_Min_Float_Days")
  isControllingFloatTask              Float?          @map("Is_Controlling_Float_Task")
  floatHealthStatus                   Float?          @map("Float_Health_Status")
  floatHealthSortOrder                Int?            @map("Float_Health_Sort_Order")
  floatRagLabel                       Float?          @map("Float_RAG_Label")
  plannedProgressPct                  Float?          @map("Planned_Progress_Pct")
  actualProgressPct                   Float?          @map("Actual_Progress_Pct")
  forecastProgressPct                 Float?          @map("Forecast_Progress_Pct")
  progressVariancePct                 Float?          @map("Progress_Variance_Pct")
  plannedQuantity                     Float?          @map("Planned_Quantity")
  earnedQuantity                      Float?          @map("Earned_Quantity")
  executableProgressPct               Float?          @map("Executable_Progress_Pct")
  contributionToProjectPct            Float?          @map("Contribution_To_Project_Pct")
  taskSpi                             Float?          @map("Task_SPI")
  taskSpiRagLabel                     Float?          @map("Task_SPI_RAG_Label")
  remainingQuantity                   Float?          @map("Remaining_Quantity")
  requiredRatePerDay                  String?         @map("Required_Rate_Per_Day")
  forecastDelayDays                   Int?            @map("Forecast_Delay_Days")
  cpmDelayBreachFlag                  Boolean?        @map("CPM_Delay_Breach_Flag")
  cumulativePlannedProgress           String?         @map("Cumulative_Planned_Progress")
  cumulativeActualProgress            String?         @map("Cumulative_Actual_Progress")
  cumulativeBacklogPct                Float?          @map("Cumulative_Backlog_Pct")
  domainSpi                           Float?          @map("Domain_SPI")
  conTotalRules                       Int?            @map("CON_Total_Rules")
  conCompletedRules                   Int?            @map("CON_Completed_Rules")
  conOverdueRules                     Int?            @map("CON_Overdue_Rules")
  conAtRiskRules7day                  Int?            @map("CON_At_Risk_Rules_7Day")
  conAtRiskRules30day                 Int?            @map("CON_At_Risk_Rules_30Day")
  conPendingRules                     Int?            @map("CON_Pending_Rules")
  conLacWeekPct                       Float?          @map("CON_LAC_Week_Pct")
  conLacMonthPct                      Float?          @map("CON_LAC_Month_Pct")
  prcTotalRules                       Int?            @map("PRC_Total_Rules")
  prcCompletedRules                   Int?            @map("PRC_Completed_Rules")
  prcOverdueRules                     Int?            @map("PRC_Overdue_Rules")
  prcAtRiskRules7day                  Int?            @map("PRC_At_Risk_Rules_7Day")
  prcAtRiskRules30day                 Int?            @map("PRC_At_Risk_Rules_30Day")
  prcPendingRules                     Int?            @map("PRC_Pending_Rules")
  prcLacWeekPct                       Float?          @map("PRC_LAC_Week_Pct")
  prcLacMonthPct                      Float?          @map("PRC_LAC_Month_Pct")
  lacRagLabel                         String?         @map("LAC_RAG_Label")
  cpStatusLabel                       String?         @map("CP_Status_Label")
  floatErosionFlag                    Float?          @map("Float_Erosion_Flag")
  in2wStartWindow                     String?         @map("In_2W_Start_Window")
  in4wStartWindow                     String?         @map("In_4W_Start_Window")
  in2wFinishWindow                    String?         @map("In_2W_Finish_Window")
  lookaheadPriorityScore              Float?          @map("LookAhead_Priority_Score")
  workfrontBlockFlag                  Boolean?        @map("Workfront_Block_Flag")
  taskBaselineDriftLabel              String?         @map("Task_Baseline_Drift_Label")
  taskDelaySourceLabel                String?         @map("Task_Delay_Source_Label")
  milestoneStatusLabel                String?         @map("Milestone_Status_Label")
  taskRiskScore                       Float?          @map("Task_Risk_Score")
  taskRiskTier                        String?         @map("Task_Risk_Tier")
  delayAttributionLabel               String?         @map("Delay_Attribution_Label")
  taskAccelerationDays                Int?            @map("Task_Acceleration_Days")
  taskRecoverySpiRequired             Float?          @map("Task_Recovery_SPI_Required")
  recoveryFeasibilityLabel            String?         @map("Recovery_Feasibility_Label")
  crashCandidateFlag                  Boolean?        @map("Crash_Candidate_Flag")
  fasttrackCandidateFlag              Boolean?        @map("FastTrack_Candidate_Flag")
  taskAccountabilityLabel             String?         @map("Task_Accountability_Label")
  taskHealthScore                     Float?          @map("Task_Health_Score")
  taskHealthRag                       String?         @map("Task_Health_RAG")
  asBuiltDurationDays                 Int?            @map("As_Built_Duration_Days")
  durationVarianceDays                Int?            @map("Duration_Variance_Days")
  taskReportFlag                      Boolean?        @map("Task_Report_Flag")
  narrativeContributionLabel          String?         @map("Narrative_Contribution_Label")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([projectKey])
  @@map("tbl_03_project_task")
}
